# 原始大陆 - Minecraft服务器网站使用说明文档

## 项目概述

原始大陆是一个为Minecraft中国版Java服务器设计的网站系统，提供了服务器展示、资源下载、团队介绍等功能。该系统使用PHP和SQLite构建，无需复杂的服务器环境配置即可运行。

## 系统特性

- 响应式设计，支持PC和移动设备访问
- 动态内容管理，所有展示内容均可通过后台管理
- 集成服务器状态实时显示功能
- 支持背景音乐和视频播放
- 完善的后台管理系统，包含用户认证和安全防护
- 数据存储于SQLite数据库，无需额外配置数据库服务

## 目录结构

```
.
├── admin/              # 后台管理系统
│   ├── security/       # 安全管理模块
│   ├── *.php           # 各项功能管理页面
├── api/                # API接口
├── assets/             # 静态资源文件（CSS, JS, 图片等）
├── install/            # 系统初始化脚本
├── sql/                # SQLite数据库文件（系统自动生成）
├── index.php           # 网站首页
└── README.md           # 说明文档
```

## 快速开始

### 系统要求

- PHP 7.0 或更高版本
- SQLite3 扩展
- Web服务器（Apache/Nginx等）

### 安装步骤

1. 将所有文件上传到Web服务器目录
2. 确保服务器具有写入权限（网站会自动创建数据库文件）
3. 访问网站首页，系统将自动初始化数据库
4. 默认后台登录信息：
   - 用户名：admin
   - 密码：admin
5. 登录后台管理系统修改默认密码和网站内容

### 首次配置

1. 访问 `http://域名/admin/login.php` 进入后台登录页面
2. 使用默认账号密码登录
3. 进入后台后，首先修改管理员密码（通过"系统设置"页面）
4. 根据需要配置各项内容：
   - 服务器设置
   - 资源包管理
   - 音乐和视频背景
   - 展览图片
   - 团队成员信息
   - 加入我们页面设置

## 功能模块说明

### 1. 首页展示

网站首页包含以下部分：

- 服务器状态实时显示
- 服务器特点介绍
- 精选展览图片展示
- 管理团队介绍
- 资源包下载引导
- 加入服务器指引

### 2. 后台管理系统

#### 2.1 登录安全

- CSRF防护机制
- 登录尝试次数限制（防暴力破解）
- 会话超时保护
- 密码强度验证

#### 2.2 功能管理模块

1. **音乐管理**
   - 设置背景音乐URL
   - 控制是否自动播放

2. **资源包管理**
   - 设置资源包下载链接
   - 管理资源下载页面内容

3. **服务器设置**
   - 配置主服务器和备用服务器地址
   - 管理服务器特点介绍（支持图标、标题、描述）

4. **视频背景**
   - 设置首页背景视频URL

5. **加入我们**
   - 配置QQ群二维码链接
   - 设置服务器加入指引信息

6. **系统设置**
   - 管理员密码修改
   - 查看系统日志

### 3. API接口

网站提供以下API接口供外部调用：

- `/api/server-address.php` - 获取服务器地址
- `/api/server-secondary-address.php` - 获取备用服务器地址
- `/api/music-url.php` - 获取背景音乐URL
- `/api/video-url.php` - 获取背景视频URL
- `/api/resource-url.php` - 获取资源包URL
- `/api/join-qr-url.php` - 获取QQ群二维码链接

## 数据管理

### 数据库结构

所有数据存储在SQLite数据库中（位于`sql/settings.db`），包含以下表：

- `admins` - 管理员账户
- `server_settings` - 主服务器设置
- `server_settings_secondary` - 备用服务器设置
- `music_settings` - 音乐设置
- `video_settings` - 视频设置
- `resource_settings` - 资源包设置
- `server_features` - 服务器特点
- `gallery_images` - 展览图片
- `team_members` - 团队成员
- `resource_sections` - 资源下载页面内容
- `join_settings` - 加入我们页面设置
- `join_qr_settings` - QQ群二维码设置
- `login_attempts` - 登录尝试记录
- `admin_logs` - 管理员活动日志

### 数据初始化

系统首次运行时会自动创建数据库和默认数据：
- 默认管理员账户（admin/admin）
- 默认服务器信息
- 默认展览图片
- 默认团队成员信息
- 默认资源包信息

## 安全机制

1. **CSRF防护**：所有表单提交都包含CSRF令牌验证
2. **密码安全**：使用PHP的password_hash函数进行密码加密
3. **登录保护**：限制登录尝试次数，防止暴力破解
4. **会话管理**：会话超时自动登出
5. **输入过滤**：所有用户输入都经过htmlspecialchars处理，防止XSS攻击
6. **安全头设置**：设置多项HTTP安全头，增强网站安全性

## 自定义配置

### 网站内容自定义

几乎所有的网站内容都可以通过后台管理系统进行自定义：
- 服务器地址和名称
- 展示的服务器特点（支持自定义图标）
- 展览图片
- 团队成员信息
- 资源包下载链接和说明
- 加入服务器的指引信息

### 样式自定义

网站样式主要在以下文件中：
- `assets/style.css` - 主要样式文件
- `assets/loading.css` - 加载动画样式
- 各页面内的内联样式

## 常见问题

### 1. 忘记管理员密码怎么办？

如果忘记了管理员密码，可以：
1. 删除`sql/settings.db`文件
2. 重新访问网站，系统会重新初始化并创建默认账户
3. 使用默认账户登录后立即修改密码

或者通过数据库直接修改：
1. 使用SQLite工具打开`sql/settings.db`
2. 在`admins`表中找到对应用户
3. 将密码字段更新为`password_hash('新密码', PASSWORD_DEFAULT)`生成的哈希值

### 2. 如何添加新的服务器特点？

在后台管理系统中：
1. 登录管理后台
2. 进入"服务器设置"页面
3. 在"服务器特点管理"部分填写相关信息：
   - 图标代码（支持Font Awesome图标类名或SVG代码）
   - 特点标题
   - 特点描述
   - 排序值（数字越小越靠前）
4. 点击"添加特点"按钮

### 3. 网站无法显示或出现错误怎么办？

1. 检查PHP版本是否符合要求
2. 确认服务器具有写入权限（网站需要创建数据库文件）
3. 检查PHP是否启用了SQLite3扩展
4. 查看服务器错误日志获取详细信息

## 维护建议

1. **定期备份**：定期备份`sql/settings.db`文件
2. **更新密码**：定期更新管理员密码
3. **检查日志**：定期查看管理员活动日志，监控异常操作
4. **内容更新**：及时更新展览图片和服务器信息，保持网站活跃度

## 技术支持

如遇到无法解决的问题，请联系开发团队或在相关社区寻求帮助。

## 版权信息

本系统为开源项目，可根据需要进行修改和分发，但请保留相关版权信息。